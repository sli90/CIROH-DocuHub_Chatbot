[
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 1,
      "current_header": "## Project Objective"
    },
    "content": "**bmi-burn-lstm** is a Rust implementation of a **Basic Model Interface (BMI)** adapter for LSTM-based streamflow prediction. It provides a drop-in replacement for Python BMI LSTM implementations found in repositories such as [CIROH-UA/lstm](https://github.com/CIROH-UA/lstm), [NOAA-OWP/lstm](https://github.com/NOAA-OWP/lstm), and [jmframe/lstm](https://github.com/jmframe/lstm)."
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 2,
      "current_header": "## Core Functionalities"
    },
    "content": "- Native Rust implementation using the [Burn](https://burn.dev/) deep learning framework.  \n- Compatible with existing PyTorch model weights from `jmframe/lstm` and **NextGen-In-A-Box**.  \n- Drop-in replacement for Python BMI LSTM adapter.  \n- Supports ensemble model configurations.  \n- Built on [bmi-rs](https://github.com/aaraney/bmi-rs) Rust BMI bindings.  \n- Outputs match those of the Python BMI LSTM implementation."
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 3,
      "current_header": "## Technical Stack"
    },
    "content": "- **Language:** Rust (2024 edition).  \n- **Deep Learning Framework:** Burn.  \n- **Bindings:** bmi-rs (Rust BMI bindings).  \n- **Dependencies:**  \n  - Rust 2024 edition.  \n  - Local clone of [bmi-rs](https://github.com/aaraney/bmi-rs).  \n  - [Astral UV](https://docs.astral.sh/uv/) installed and available on system path.  \n- **Development Status:** Active development."
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 4,
      "current_header": "## Setup and Usage"
    },
    "content": "1. **Install Dependencies:**  \n   ```bash\n   curl -LsSf https://astral.sh/uv/install.sh | sh\n   curl https://sh.rustup.rs -sSf | bash -s -- -y && . \"$HOME/.cargo/env\"\n   ```  \n2. **Clone Required Repositories:**  \n   ```bash\n   git clone https://github.com/aaraney/bmi-rs\n   git clone https://github.com/ciroh-ua/bmi-burn-lstm\n   ```  \n3. **Build Project:**  \n   ```bash\n   cd bmi-burn-lstm\n   cargo build --release\n   ```  \n   The compiled shared object is located at:  \n   `target/release/libbmi_burn_lstm.so`"
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 5,
      "current_header": "## Model Compatibility"
    },
    "content": "- Trained models from `jmframe/lstm`.  \n- Models included in **NextGen-In-A-Box**.  \n- Any PyTorch LSTM model following the **neuralhydrology** architecture (`1 layer LSTM + 1 linear layer`).  \n- Automatic weight conversion from PyTorch to Burn format on first run."
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 6,
      "current_header": "## NextGen Realization Example"
    },
    "content": "Example configuration for integrating this model with NextGen:  \n```json\n{ \"global\": { \"formulations\": [ { \"name\": \"bmi_multi\", \"params\": { \"name\": \"bmi_multi\", \"model_type_name\": \"lstm\", \"forcing_file\": \"\", \"init_config\": \"\", \"allow_exceed_end_time\": true, \"main_output_variable\": \"land_surface_water__runoff_depth\", \"modules\": [ { \"name\": \"bmi_c\", \"params\": { \"name\": \"bmi_c\", \"model_type_name\": \"bmi_rust\", \"init_config\": \"./config/cat_config/lstm/{{id}}.yml\", \"allow_exceed_end_time\": true, \"main_output_variable\": \"land_surface_water__runoff_depth\", \"uses_forcing_file\": false, \"registration_function\": \"register_bmi_lstm\", \"library_file\": \"/dmod/shared_libs/libbmi_burn_lstm.so\" } } ] } } ], \"forcing\": { \"path\": \"./forcings/forcings.nc\", \"provider\": \"NetCDF\", \"enable_cache\": false } }, \"time\": { \"start_time\": \"2010-01-01 00:00:00\", \"end_time\": \"2011-01-01 00:00:00\", \"output_interval\": 3600 }, \"routing\": { \"t_route_config_file_with_path\": \"./config/troute.yaml\" }, \"remotes_enabled\": false, \"output_root\": \"./outputs/ngen\" }\n```"
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 7,
      "current_header": "## NGIAB Patch Example"
    },
    "content": "Example Dockerfile for integrating the adapter into NextGen-In-A-Box:  \n```Dockerfile\nFROM awiciroh/ciroh-ngen-image AS build\nRUN dnf install -y gcc clang git\nRUN curl https://sh.rustup.rs -sSf | bash -s -- -y\nRUN echo 'source $HOME/.cargo/env' >> $HOME/.bashrc\nWORKDIR /build\nRUN git clone https://github.com/aaraney/bmi-rs\nRUN git clone https://github.com/ciroh-ua/bmi-burn-lstm\nWORKDIR /build/bmi-burn-lstm\nRUN cargo build --release\n\nFROM awiciroh/ciroh-ngen-image AS final\nCOPY --from=build /build/bmi-burn-lstm/target/release/libbmi_burn_lstm.so /dmod/shared_libs/libbmi_burn_lstm.so\n```\nBuild command:  \n```bash\ndocker build -t ngiab -f Dockerfile .\n```"
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 8,
      "current_header": "## Project Context & Domain"
    },
    "content": "- **Domain:** Hydrology / Streamflow prediction / Model integration.  \n- **Affiliation:** Not specified.  \n- **Purpose:** Provide a faster Rust-based BMI adapter for LSTM hydrologic models."
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 9,
      "current_header": "## Input / Output"
    },
    "content": "**Input:**  \n- Trained PyTorch LSTM model weights.  \n- NextGen configuration files for model integration.  \n- Forcing and initialization data defined in configuration.  \n**Output:**  \n- Rust-based shared object file (`libbmi_burn_lstm.so`).  \n- Model outputs consistent with the Python BMI LSTM implementation."
  },
  {
    "metadata": {
      "idurl": 4,
      "title": "bmi-burn-lstm",
      "source": "https://github.com/CIROH-UA/bmi-burn-lstm",
      "section_header": "# bmi-burn-lstm",
      "parent_header": "# bmi-burn-lstm",
      "order": 10,
      "current_header": "## License"
    },
    "content": "License information: Not specified."
  }
]