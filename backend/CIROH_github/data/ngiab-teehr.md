# Project Title: **ngiab-teehr**

## Project Objective  
The **ngiab-teehr** repository provides functionality for coupling [TEEHR](https://rtiinternational.github.io/teehr/) with [NextGen-In-A-Box (NGIAB)](https://github.com/jameshalgren/NGIAB-CloudInfra) simulation output. The repository enables users to perform TEEHR evaluations on NGIAB-generated data.

## Core Functionalities  
- Integrates TEEHR evaluations with NGIAB simulation outputs.  
- Provides an example script (`example_guide.sh`) for running evaluations.  
- Includes workflow scripts such as `scripts/teehr_ngen.py` and `scripts/utils.py`.  
- Supports customization of metrics calculated by TEEHR.  
- Uses GitHub Actions to automatically build and push Docker images to the AWI CIROH registry.  
- Allows local Docker builds and pushes.  

## Technical Stack  
- **Languages/Tools:** Python, Shell.  
- **Containerization:** Docker.  
- **Automation:** GitHub Actions.  

## Setup and Usage  
### Running TEEHR Evaluation Example  
The included script `example_guide.sh` demonstrates how to run a TEEHR evaluation using NGIAB output.

### Building and Pushing the Docker Image  
1. Create a branch from `main`.  
2. Edit `scripts/teehr_ngen.py` and/or `scripts/utils.py` as needed.  
3. Update the `Changelog` file.  
4. Submit a pull request and merge it.  
5. Tag and push the new version:  
   ```bash
   git checkout main
   git pull
   git tag -a v0.x.x -m "version 0.x.x"
   git push origin v0.x.x
   ```  
   This triggers a GitHub Action to build and push the Docker image with the new tag and the `latest` tag to the AWI CIROH registry.  

### Local Build and Push  
```bash
docker build -t awiciroh/ngiab-teehr:<tag name> .
docker push awiciroh/ngiab-teehr:<tag name>
```  

### Image Tag Usage  
Specify the Docker image tag in the `guide.sh` script to run customized evaluations.

## Project Context & Domain  
- **Domain:** Hydrology / Model Evaluation / Data Processing.  
- **Affiliation:** CIROH (Cooperative Institute for Research to Operations in Hydrology), NOAA, The University of Alabama.  
- **Purpose:** Facilitate TEEHR-based evaluation of NGIAB simulation outputs through an automated Docker-based workflow.  

## Input / Output  
**Input:**  
- NGIAB simulation output data.  
- TEEHR evaluation configurations and scripts.  

**Output:**  
- Evaluation results generated by TEEHR.  
- Docker images containing updated workflows.  
